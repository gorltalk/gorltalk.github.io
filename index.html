<!DOCTYPE html>
<html>
<head>
    <title>GorlTalk Boombox</title>
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* [Keep all your existing CSS] */
        /* Added mobile-specific tweaks below */
        .mobile-btn {
            padding: 12px 20px; /* Larger tap targets */
            font-size: 1.5em; /* Bigger text */
        }
        @media (max-width: 768px) {
            #boombox {
                pointer-events: none; /* Disable image map on mobile */
            }
        }
    </style>
</head>
<body>
    <!-- [Keep your existing HTML structure] -->
    <script>
        let player;
        let playerReady = false;
        let currentTrackIndex = 0;
        const isMobile = /Mobi|Android/i.test(navigator.userAgent);
        
        const playlist = [
            { id: 'dQw4w9WgXcQ', title: 'NEVER GONNA GIVE YOU UP' }
            // [Keep your other tracks]
        ];

        async function initPlayer() {
            await loadYouTubePlayer();
            
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: playlist[currentTrackIndex].id,
                playerVars: {
                    origin: window.location.origin,
                    autoplay: isMobile ? 0 : 1, // Disable autoplay on mobile
                    controls: 0,
                    modestbranding: 1,
                    enablejsapi: 1
                },
                events: {
                    'onReady': (event) => {
                        playerReady = true;
                        event.target.setVolume(80);
                        if (isMobile) {
                            // Mobile workaround: Show play button first
                            updateStatus("▶️ TAP PLAY");
                        } else {
                            updateStatus("▶️ NOW PLAYING");
                        }
                    }
                }
            });
        }

        // Modified mobile play function
        function handleFirstPlay() {
            if (isMobile && !playerReady) return;
            
            if (player.getPlayerState() !== YT.PlayerState.PLAYING) {
                player.playVideo();
                updateStatus();
            }
        }

        // Update your mobile button event listeners:
        document.querySelectorAll('.mobile-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const action = this.getAttribute('data-action');
                
                // Required for mobile playback initiation
                if (!playerReady) initPlayer();
                
                if (action === 'play') {
                    handleFirstPlay(); // Special mobile handling
                } else if (action === 'prev') {
                    playPrev();
                } else if (action === 'next') {
                    playNext();
                }
            });
        });

        /* [Keep other functions the same] */
    </script>
</body>
</html>
